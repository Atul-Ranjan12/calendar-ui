{"version":3,"file":"BookingCalendar.jsx","sourceRoot":"","sources":["BookingCalendar.tsx"],"names":[],"mappings":";AAAA,OAAO,KAAK,EAAE,EAAE,QAAQ,EAAc,SAAS,EAAE,MAAM,OAAO,CAAC;AAC/D,OAAO,uBAAuB,CAAC;AAyC/B,0BAA0B;AAC1B,MAAM,CAAC,IAAM,eAAe,GAAG,UAAC,EAST;QARrB,mBAAmB,yBAAA,EACnB,qBAAqB,2BAAA,EACrB,kBAAkB,wBAAA,EAClB,UAAU,gBAAA,EACV,qBAAqB,2BAAA,EACrB,UAAU,gBAAA,EACV,iBAAiB,uBAAA,EACjB,8BAA8B,oCAAA;IAE9B,kCAAkC;IAC5B,IAAA,KAAgC,QAAQ,CAAO,IAAI,IAAI,EAAE,CAAC,EAAzD,WAAW,QAAA,EAAE,cAAc,QAA8B,CAAC;IACjE,4DAA4D;IAC5D,aAAa;IACb,8BAA8B;IACxB,IAAA,KAAsC,QAAQ,CAAW;IAC7D,iCAAiC;IACjC,gBAAgB;KACjB,CAAC,EAHK,cAAc,QAAA,EAAE,iBAAiB,QAGtC,CAAC;IAEH,gDAAgD;IAChD,gEAAgE;IAChE,SAAS,CAAC;QACR,IAAM,SAAS,GAAG;;;;;wBAChB,IAAI,CAAC,UAAU;4BAAE,sBAAO;;;;wBAGN,qBAAM,iBAAiB,EAAE,EAAA;;wBAAnC,OAAO,GAAG,SAAyB;wBAEzC,iBAAiB,CAAC,OAAO,CAAC,CAAC;;;;wBAE3B,8BAA8B,EAAE,CAAC;;;;;aAEpC,CAAC;QAEF,SAAS,EAAE,CAAC;IACd,CAAC,EAAE,CAAC,iBAAiB,EAAE,8BAA8B,EAAE,UAAU,CAAC,CAAC,CAAC;IAEpE,+CAA+C;IAC/C,mBAAmB;IACnB,IAAM,WAAW,GAAG,UAAC,GAAS;QAC5B,eAAe;QACf,IAAM,OAAO,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC;QAC9B,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;QAEvC,kBAAkB;QAClB,4CAA4C;QAC5C,IAAI,aAAa,GAAG,SAAS,CAAC;QAC9B,IAAI,qBAAqB,EAAE,CAAC;YAC1B,aAAa,GAAG,qBAAqB,CAAC,OAAO,CAAC,CAAC;QACjD,CAAC;aAAM,CAAC;YACN,aAAa,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACtD,CAAC;QAED,IAAI,cAAc,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC;YAC3C,cAAc,CAAC,GAAG,CAAC,CAAC;YACpB,oCAAoC;YACpC,8CAA8C;YAC9C,YAAY;YACZ,mBAAmB,CAAC,aAAa,CAAC,CAAC;QACrC,CAAC;aAAM,CAAC;YACN,oBAAoB;YACpB,UAAU,CAAC,qBAAqB,CAAC,CAAC;QACpC,CAAC;IACH,CAAC,CAAC;IAEF,oDAAoD;IACpD,IAAM,aAAa,GAAG;QACpB,cAAc,CAAC,UAAC,QAAQ;YACtB,IAAM,aAAa,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;YACzC,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;YAErD,aAAa,CAAC,OAAO,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC;YAE5C,OAAO,aAAa,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,gDAAgD;IAChD,IAAM,aAAa,GAAG;QACpB,cAAc,CAAC,UAAC,QAAQ;YACtB,IAAM,aAAa,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;YACzC,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;YAErD,aAAa,CAAC,OAAO,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC;YAE5C,OAAO,aAAa,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,gFAAgF;IAChF,IAAM,WAAW,GAAG;QAClB,IAAM,IAAI,GAAkB,EAAE,CAAC;QAE/B,IAAM,eAAe,GAAG,IAAI,IAAI,CAC9B,WAAW,CAAC,WAAW,EAAE,EACzB,WAAW,CAAC,QAAQ,EAAE,EACtB,CAAC,CACF,CAAC;QACF,IAAM,WAAW,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC;QAE7C,IAAM,cAAc,GAAG,IAAI,IAAI,CAC7B,WAAW,CAAC,WAAW,EAAE,EACzB,WAAW,CAAC,QAAQ,EAAE,GAAG,CAAC,EAC1B,CAAC,CACF,CAAC,OAAO,EAAE,CAAC;QAEZ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC;YACrC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,gBAAS,CAAC,CAAE,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QAC/D,CAAC;gCAEQ,GAAG;YACV,IAAM,YAAY,GAChB,GAAG,KAAK,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE;gBAC5B,WAAW,CAAC,QAAQ,EAAE,KAAK,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE;gBAChD,WAAW,CAAC,WAAW,EAAE,KAAK,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;YAEzD,IAAM,UAAU,GAAG,CAAC,WAAW,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACrD,IAAM,QAAQ,GAAG,CAAC,WAAW,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YAEnD,IAAM,aAAa,GAAG,IAAI,IAAI,CAC5B,WAAW,CAAC,WAAW,EAAE,EACzB,WAAW,CAAC,QAAQ,EAAE,EACtB,GAAG,GAAG,CAAC,CACR;iBACE,WAAW,EAAE;iBACb,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAEjB,IAAI,CAAC,IAAI,CACP,CAAC,GAAG,CAAC,SAAS,CAAC,yCAAyC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAChE;UAAA,CAAC,GAAG,CACF,OAAO,CAAC,CAAC;oBACP,IAAM,WAAW,GAAG,IAAI,IAAI,CAC1B,WAAW,CAAC,WAAW,EAAE,EACzB,WAAW,CAAC,QAAQ,EAAE,EACtB,GAAG,CACJ,CAAC;oBAEF,WAAW,CAAC,WAAW,CAAC,CAAC;gBAC3B,CAAC,CAAC,CACF,SAAS,CAAC,CAAC,qKACT,YAAY;oBACV,CAAC,CAAC,gBAAgB;oBAClB,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,KAAK,GAAG;wBAC3B,cAAc,CAAC,QAAQ,CAAC,aAAa,CAAC;wBACxC,CAAC,CAAC,gBAAgB;wBAClB,CAAC,CAAC,UAAU,IAAI,QAAQ;4BACtB,CAAC,CAAC,YAAY;4BACd,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,aAAa,CAAC;gCACtC,CAAC,CAAC,aAAa;gCACf,CAAC,CAAC,cAAc,CACxB,CAAC,CAEH;YAAA,CAAC,GAAG,CACN;UAAA,EAAE,GAAG,CACP;QAAA,EAAE,GAAG,CAAC,CACP,CAAC;;QA7CJ,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,IAAI,cAAc,EAAE,GAAG,EAAE;oBAArC,GAAG;SA8CX;QAED,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IAEF,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,wFAAwF,CACrG;MAAA,CAAC,cAAc,CAAC,MAAM,KAAK,CAAC,IAAI,CAC9B,CAAC,GAAG,CAAC,SAAS,CAAC,uFAAuF,CACpG;UAAA,CAAC,GAAG,CAAC,SAAS,CAAC,iGAAiG,CAC9G;YAAA,CAAC,IAAI,CAAC,SAAS,CAAC,4CAA4C,CAC1D;;YACF,EAAE,IAAI,CACN;YAAA,CAAC,IAAI,CAAC,SAAS,CAAC,sCAAsC,CACpD;;YACF,EAAE,IAAI,CACR;UAAA,EAAE,GAAG,CACP;QAAA,EAAE,GAAG,CAAC,CACP,CACD;MAAA,CAAC,GAAG,CAAC,SAAS,CAAC,2DAA2D,CACxE;QAAA,CAAC,MAAM,CACL,SAAS,CAAC,+EAA+E,CACzF,OAAO,CAAC,CAAC,aAAa,CAAC,CAEvB;;QACF,EAAE,MAAM,CACR;QAAA,CAAC,IAAI,CAAC,SAAS,CAAC,oCAAoC,CAClD;UAAA,CAAC,WAAW,CAAC,kBAAkB,CAAC,SAAS,EAAE;YACzC,KAAK,EAAE,MAAM;YACb,IAAI,EAAE,SAAS;SAChB,CAAC,CACJ;QAAA,EAAE,IAAI,CACN;QAAA,CAAC,MAAM,CACL,SAAS,CAAC,gFAAgF,CAC1F,OAAO,CAAC,CAAC,aAAa,CAAC,CAEvB;;QACF,EAAE,MAAM,CACV;MAAA,EAAE,GAAG,CACL;MAAA,CAAC,GAAG,CAAC,SAAS,CAAC,+BAA+B,CAC5C;QAAA,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,UAAC,GAAG,IAAK,OAAA,CAC9D,CAAC,GAAG,CACF,GAAG,CAAC,CAAC,GAAG,CAAC,CACT,SAAS,CAAC,wGAAwG,CAElH;YAAA,CAAC,GAAG,CACN;UAAA,EAAE,GAAG,CAAC,CACP,EAP+D,CAO/D,CAAC,CACF;QAAA,CAAC,WAAW,EAAE,CAChB;MAAA,EAAE,GAAG,CACL;MAAA,CAAC,GAAG,CAAC,SAAS,CAAC,+BAA+B,CAC5C;QAAA,CAAC,GAAG,CAAC,SAAS,CAAC,qDAAqD,CAClE;UAAA,CAAC,GAAG,CAAC,SAAS,CAAC,qCAAqC,CAAC,EAAE,GAAG,CAC1D;UAAA,CAAC,EAAE,CAAC,SAAS,CAAC,iCAAiC,CAAC,YAAY,EAAE,EAAE,CAClE;QAAA,EAAE,GAAG,CACL;QAAA,CAAC,GAAG,CAAC,SAAS,CAAC,qDAAqD,CAClE;UAAA,CAAC,GAAG,CAAC,SAAS,CAAC,qCAAqC,CAAC,EAAE,GAAG,CAC1D;UAAA,CAAC,EAAE,CAAC,SAAS,CAAC,iCAAiC,CAAC,aAAa,EAAE,EAAE,CACnE;QAAA,EAAE,GAAG,CACL;QAAA,CAAC,GAAG,CAAC,SAAS,CAAC,qDAAqD,CAClE;UAAA,CAAC,GAAG,CAAC,SAAS,CAAC,kCAAkC,CAAC,EAAE,GAAG,CACvD;UAAA,CAAC,EAAE,CAAC,SAAS,CAAC,iCAAiC,CAC7C;YAAA,CAAC,kBAAkB,CACrB;UAAA,EAAE,EAAE,CACN;QAAA,EAAE,GAAG,CACL;QAAA,CAAC,GAAG,CAAC,SAAS,CAAC,qDAAqD,CAClE;UAAA,CAAC,GAAG,CAAC,SAAS,CAAC,mCAAmC,CAAC,EAAE,GAAG,CACxD;UAAA,CAAC,EAAE,CAAC,SAAS,CAAC,iCAAiC,CAAC,gBAAgB,EAAE,EAAE,CACtE;QAAA,EAAE,GAAG,CACL;QAAA,CAAC,GAAG,CAAC,SAAS,CAAC,qDAAqD,CAClE;UAAA,CAAC,GAAG,CAAC,SAAS,CAAC,iCAAiC,CAAC,EAAE,GAAG,CACtD;UAAA,CAAC,EAAE,CAAC,SAAS,CAAC,iCAAiC,CAAC,OAAO,EAAE,EAAE,CAC7D;QAAA,EAAE,GAAG,CACP;MAAA,EAAE,GAAG,CACP;IAAA,EAAE,GAAG,CAAC,CACP,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,eAAe,CAAC","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport \"./BookingCalendar.css\";\n\n/*\nTODO: These are the things TO-DO at the moment\n1. Fix the responsiveness of the calendar\n2. Create a dark mode version\n\n// Please add any suggestions here\n*/\n\n/**\n * Primary UI component for user interaction\n */\ninterface BookingCalendarProps {\n  // This is the interface containing the props for the\n  // calendar\n  name: string;\n  // Function to get available dates from the backend\n  // set hasFetcher = false to skip getting available dates\n  hasFetcher: boolean;\n  getAvailableDates: () => Promise<string[]>;\n\n  // Function to set off a rollback in case of failure to\n  // fetch dates\n  getAvailableDatesErrorRollback: () => void;\n\n  // Function to handle the user form when a date is\n  // clicked\n  setDateUserFormData: (date: string) => void;\n  // Function to handle the dateFormatter when\n  // added by the user\n  dateFormatterFunction?: (date: Date) => string;\n  // Reservation name to show on labels\n  // Example \"Workshop daty\"\n  reservationDayName: string;\n  // Function to display an error when clicked on\n  // the wrong date and the error message itself\n  wrongDateErrorMessage: string;\n  errorToast: (msg: string) => void;\n}\n\n// Booking Calendar itself\nexport const BookingCalendar = ({\n  setDateUserFormData,\n  dateFormatterFunction,\n  reservationDayName,\n  errorToast,\n  wrongDateErrorMessage,\n  hasFetcher,\n  getAvailableDates,\n  getAvailableDatesErrorRollback,\n}: BookingCalendarProps) => {\n  // State to store the current date\n  const [currentDate, setCurrentDate] = useState<Date>(new Date());\n  // State to store the available dates so as for the calendar\n  // to display\n  // Date format is \"yyyy-dd-mm\"\n  const [availableDates, setAvailableDates] = useState<string[]>([\n    // This is an example date format\n    // \"2024-08-30\",\n  ]);\n\n  // This effect fetches any data that is required\n  // if required from the server, or simply to add available dates\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!hasFetcher) return;\n\n      try {\n        const avDates = await getAvailableDates();\n\n        setAvailableDates(avDates);\n      } catch (error) {\n        getAvailableDatesErrorRollback();\n      }\n    };\n\n    fetchData();\n  }, [getAvailableDates, getAvailableDatesErrorRollback, hasFetcher]);\n\n  // This function handles when a particular date\n  // has been clicked\n  const dateClicked = (day: Date) => {\n    // Set next day\n    const nextDay = new Date(day);\n    nextDay.setDate(nextDay.getDate() + 1);\n\n    // Format the date\n    // Add custom functionality to format a date\n    let formattedDate = undefined;\n    if (dateFormatterFunction) {\n      formattedDate = dateFormatterFunction(nextDay);\n    } else {\n      formattedDate = nextDay.toISOString().split(\"T\")[0];\n    }\n\n    if (availableDates.includes(formattedDate)) {\n      setCurrentDate(day);\n      // Here we call the function for the\n      // user to be able to handle the set user date\n      // form data\n      setDateUserFormData(formattedDate);\n    } else {\n      // Handle error here\n      errorToast(wrongDateErrorMessage);\n    }\n  };\n\n  // This function handles going to the previous month\n  const goToPrevMonth = () => {\n    setCurrentDate((prevDate) => {\n      const prevMonthDate = new Date(prevDate);\n      prevMonthDate.setMonth(prevMonthDate.getMonth() - 1);\n\n      prevMonthDate.setDate(new Date().getDate());\n\n      return prevMonthDate;\n    });\n  };\n\n  // This function handles going to the next month\n  const goToNextMonth = () => {\n    setCurrentDate((prevDate) => {\n      const nextMonthDate = new Date(prevDate);\n      nextMonthDate.setMonth(nextMonthDate.getMonth() + 1);\n\n      nextMonthDate.setDate(new Date().getDate());\n\n      return nextMonthDate;\n    });\n  };\n\n  // Function to fetch and calculate days in month and fill in the UI as necessary\n  const daysInMonth = () => {\n    const days: JSX.Element[] = [];\n\n    const firstDayOfMonth = new Date(\n      currentDate.getFullYear(),\n      currentDate.getMonth(),\n      1,\n    );\n    const startingDay = firstDayOfMonth.getDay();\n\n    const numDaysInMonth = new Date(\n      currentDate.getFullYear(),\n      currentDate.getMonth() + 1,\n      0,\n    ).getDate();\n\n    for (let i = 0; i < startingDay; i++) {\n      days.push(<span key={`empty-${i}`} className=\"p-10\"></span>);\n    }\n\n    for (let day = 1; day <= numDaysInMonth; day++) {\n      const isCurrentDay =\n        day === new Date().getDate() &&\n        currentDate.getMonth() === new Date().getMonth() &&\n        currentDate.getFullYear() === new Date().getFullYear();\n\n      const isSaturday = (startingDay + day - 1) % 7 === 6;\n      const isSunday = (startingDay + day - 1) % 7 === 0;\n\n      const formattedDate = new Date(\n        currentDate.getFullYear(),\n        currentDate.getMonth(),\n        day + 1,\n      )\n        .toISOString()\n        .split(\"T\")[0];\n\n      days.push(\n        <div className=\"flex items-center justify-center w-full\" key={day}>\n          <div\n            onClick={() => {\n              const clickedDate = new Date(\n                currentDate.getFullYear(),\n                currentDate.getMonth(),\n                day,\n              );\n\n              dateClicked(clickedDate);\n            }}\n            className={`flex items-center justify-center w-10 h-10 md:w-16 md:h-16 text-sm font-poppins text-center rounded-full hover:scale-105 duration-200 hover:cursor-pointer ${\n              isCurrentDay\n                ? \"bg-emerald-200\"\n                : currentDate.getDate() === day &&\n                    availableDates.includes(formattedDate)\n                  ? \"bg-emerald-500\"\n                  : isSaturday || isSunday\n                    ? \"bg-red-100\"\n                    : availableDates.includes(formattedDate)\n                      ? \"bg-cyan-500\"\n                      : \"bg-slate-100\"\n            }`}\n          >\n            {day}\n          </div>\n        </div>,\n      );\n    }\n\n    return days;\n  };\n\n  return (\n    <div className=\"relative w-full h-full flex flex-col p-2 md:p-4 border border-black shadow-md bg-white\">\n      {availableDates.length === 0 && (\n        <div className=\"h-full w-full absolute top-0 left-0 backdrop-blur-sm flex items-center justify-center\">\n          <div className=\"p-12 bg-white border border-black flex flex-col space-y-4 items-center justify-center shadow-sm\">\n            <span className=\"font-poppins text-black text-2xl font-bold\">\n              Dates to be decided for reservation\n            </span>\n            <span className=\"font-poppins text-slate-600 text-xl \">\n              Please come back later\n            </span>\n          </div>\n        </div>\n      )}\n      <div className=\"flex flex-row justify-between items-center md:p-2 rounded\">\n        <button\n          className=\"p-2 px-6 text-black uppercase font-poppins font-light text-lg hover:scale-110\"\n          onClick={goToPrevMonth}\n        >\n          Prev\n        </button>\n        <span className=\"text-gray-600 font-poppins text-md\">\n          {currentDate.toLocaleDateString(\"default\", {\n            month: \"long\",\n            year: \"numeric\",\n          })}\n        </span>\n        <button\n          className=\"p-2 px-6  text-black uppercase font-poppins font-light text-lg hover:scale-110\"\n          onClick={goToNextMonth}\n        >\n          Next\n        </button>\n      </div>\n      <div className=\"grid grid-cols-7 w-full gap-4\">\n        {[\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"].map((day) => (\n          <div\n            key={day}\n            className=\"flex items-center justify-center p-2 md:p-8 text-xs font-poppins uppercase text-slate-600 rounded-full\"\n          >\n            {day}\n          </div>\n        ))}\n        {daysInMonth()}\n      </div>\n      <div className=\"flex flex-row space-x-5 mt-12\">\n        <div className=\"flex flex-row space-x-2 items-center justify-center\">\n          <div className=\"w-4 h-4 bg-emerald-100 rounded-full\"></div>\n          <h6 className=\"text-xs font-light font-poppins\">Current date</h6>\n        </div>\n        <div className=\"flex flex-row space-x-2 items-center justify-center\">\n          <div className=\"w-4 h-4 bg-emerald-500 rounded-full\"></div>\n          <h6 className=\"text-xs font-light font-poppins\">Selected Date</h6>\n        </div>\n        <div className=\"flex flex-row space-x-2 items-center justify-center\">\n          <div className=\"w-4 h-4 bg-cyan-500 rounded-full\"></div>\n          <h6 className=\"text-xs font-light font-poppins\">\n            {reservationDayName}\n          </h6>\n        </div>\n        <div className=\"flex flex-row space-x-2 items-center justify-center\">\n          <div className=\"w-4 h-4 bg-slate-200 rounded-full\"></div>\n          <h6 className=\"text-xs font-light font-poppins\">Date Unavailable</h6>\n        </div>\n        <div className=\"flex flex-row space-x-2 items-center justify-center\">\n          <div className=\"w-4 h-4 bg-red-200 rounded-full\"></div>\n          <h6 className=\"text-xs font-light font-poppins\">Weekend</h6>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BookingCalendar;\n"]}